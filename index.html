<!DOCTYPE html>
<html lang = "en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>Variant Search Tool</title>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <style>
            .grid-header {
                background-color:lightskyblue;
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            }
            
            .title-element {
                margin: 3px;
                padding: 3px;
                background-color: aliceblue;
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                font-size: 20px;
            }

            .grid-body {
                background-color: aliceblue;
            }

            div {
                padding: 2px;
            }

        </style>
    </head>
    <body>
        <script>
            (function() {
                const port = 3000;
                const url = `http://localhost:${port}`;
                
                function loadAllRows() {
                    let xhttp = new XMLHttpRequest();
                    xhttp.onreadystatechange = () => {
                        if (xhttp.readyState === 4 && xhttp.status === 200) {
                            addData(xhttp.responseText);
                        }
                    }
                    let endpoint = url + '/genes';
                    xhttp.open('GET', endpoint, true);
                    xhttp.send();
                }
                
                function addData(responseText) {
                    let geneCol = document.getElementById('gene-col');
                    let nucleotideCol = document.getElementById('nucleotide-col');
                    let proteinCol = document.getElementById('protein-col');
                    let aliasCol = document.getElementById('alias-col');
                    let regionCol = document.getElementById('region-col');
                    let classCol = document.getElementById('classification-col');
                    let evalCol = document.getElementById('eval-col');
                    let updateCol = document.getElementById('update-col');
                    let infoCol = document.getElementById('info-col');

                    responseBody = JSON.parse(responseText);
                    let rows = responseBody['result'];
                    geneCol.innerHTML += `<div>${rows[0]['Gene']}</div>`;
                    nucleotideCol.innerHTML += `<div>${rows[0]['Nucleotide Change']}</div>`;
                    proteinCol.innerHTML += `<div>${rows[0]['Protein Change']}</div>`;
                    aliasCol.innerHTML += `<div>${rows[0]['Alias']}</div>`;
                    regionCol.innerHTML += `<div>${rows[0]['Region']}</div>`;
                    classCol.innerHTML += `<div>${rows[0]['Reported Classification']}</div>`;
                    evalCol.innerHTML += `<div>${rows[0]['Last Evaluated']}</div>`;
                    updateCol.innerHTML += `<div>${rows[0]['Last Updated']}</div>`;
                    infoCol.innerHTML += `<div>${rows[0]['Source']}</div>`
                }

                document.addEventListener('DOMContentLoaded', loadAllRows);
            })();
        </script>
        <div id="title" class="title-element">Variant Search Tool</div>
        <div class="d-flex flex-row">
            <div class="input-group input-group-sm">
                <input type="text" class="col-2" placeholder="Enter a gene name">
                <button class="btn btn-sm mx-1 btn-primary">Search</button>
                <button class="btn button-sm btn-secondary">Clear</button>
            </div>
            <!-- Insert markup for pagination here-->
        </div>
        <div class="d-flex flex-row">
            <div class="d-flex flex-column flex-wrap flex-fill" style="padding: 0px">
                <div class="grid-header">Gene</div>
                <div id="gene-col" class="grid-body"></div>
            </div>
            <div class="d-flex flex-column flex-fill" style="padding: 0px">
                <div class="grid-header flex-nowrap">Nucleotide Change</div>
                <div id="nucleotide-col" class="grid-body"></div>
            </div>
            <div class="d-flex flex-column flex-fill" style="padding: 0px">
                <div class="grid-header flex-nowrap">Protein Change</div>
                <div id="protein-col" class="grid-body"></div>
            </div>
            <div class="d-flex flex-column flex-wrap flex-fill" style="padding: 0px">
                <div class="grid-header">Alias</div>
                <div id="alias-col" class="grid-body"></div>
            </div>
            <div class="d-flex flex-column flex-wrap flex-fill" style="padding: 0px">
                <div class="grid-header">Region</div>
                <div id="region-col" class="grid-body"></div>
            </div>
            <div class="d-flex flex-column flex-wrap flex-fill" style="padding: 0px">
                <div class="grid-header">Reported Classification</div>
                <div id="classification-col" class="grid-body"></div>
            </div>
            <div class="d-flex flex-column flex-wrap flex-fill" style="padding: 0px">
                    <div class="grid-header">Last Evaluated</div>
                    <div id="eval-col" class="grid-body"></div>
            </div>
            <div class="d-flex flex-column flex-wrap flex-fill" style="padding: 0px">
                <div class="grid-header">Last Updated</div>
                <div id="update-col" class="grid-body"></div>
            </div>
            <div class="d-flex flex-column flex-wrap flex-fill" style="padding: 0px">
                <div class="grid-header">More Info</div>
                <div id="info-col" class="grid-body"></div>
            </div>
    
        </div>
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    </body>
</html>